<div class="h-20 bg-gray-500 w-full p-3">
  <div class="flex">
    <app-dropdown-component
      [formControl]="workspaceControl"
      (change)="listTasklistsFromWorkspace()"
      [options]="workspaces()"
      placeholder="Select Workspace"
      optionLabel="name"
      [addOption]="true"
      (onAdd)="isWorkspaceModalOpen = true"
    ></app-dropdown-component>
  </div>
</div>

<div class="flex flex-row gap-5 overflow-auto h-auto mb-5">
  @for (tasklist of tasklists(); track tasklist.id) {
  <app-tasklist-component
    (onTaskCreated)="listTasklistsFromWorkspace()"
    (onTaskDelete)="listTasklistsFromWorkspace()"
    (onTasklistDelete)="listTasklistsFromWorkspace()"
    [tasklist]="tasklist"
  ></app-tasklist-component>
  } @if(workspaceControl.value){
  <div [formGroup]="newListFormGroup" class="text-white flex gap-2 h-10">
    <input class="bg-gray-500 mt-3" formControlName="name" placeholder="Create new List" />
    <button class="cursor-pointer" (click)="createNewList()">Send</button>
  </div>
  }
</div>

<div class="card flex justify-center">
  <p-dialog
    header="Create new Workspace"
    (onHide)="newWorkspaceControl.reset()"
    [modal]="true"
    [(visible)]="isWorkspaceModalOpen"
    [style]="{ width: '25rem' }"
  >
    <div class="flex mb-4">
      <input
        [formControl]="newWorkspaceControl"
        placeholder="Workspace name"
        pInputText
        class="flex-auto p-2"
        autocomplete="off"
      />
    </div>
    <div class="flex justify-end gap-2">
      <p-button
        [style]="{ backgroundColor: '#18181c', border: 'none' }"
        class=""
        label="Cancel"
        (click)="isWorkspaceModalOpen = false"
      />
      <p-button
        [disabled]="!newWorkspaceControl.value"
        [style]="{ backgroundColor: '#ffffff', color: '#18181c', border: 'none' }"
        label="Save"
        (click)="createWorkspace()"
      />
    </div>
  </p-dialog>
</div>
